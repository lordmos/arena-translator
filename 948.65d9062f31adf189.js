"use strict";(self.webpackChunkarena_translator=self.webpackChunkarena_translator||[]).push([[948],{2948:(oe,J,d)=>{d.r(J),d.d(J,{MainModule:()=>ne});var B=d(661),T=d(4041),t=d(5879),w=d(2575),C=d(6814),M=d(3410),u=d(95),y=d(2840),x=d(855),Z=d(1958);function K(o,c){if(1&o&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&o){const e=c.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.lable)}}function G(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"select",15),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw().$implicit;return t.KtG(a.contentImg=n)}),t.YNc(1,K,2,2,"option",16),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("ngModel",e.contentImg),t.xp6(1),t.Q6J("ngForOf",i.opts)}}function V(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"textarea",18),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw().$implicit;return t.KtG(a.content=n)}),t._uU(1,"\t\t\t"),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.Q6J("ngModel",e.content)}}function X(o,c){1&o&&(t.TgZ(0,"i"),t._uU(1,"\u6362\u884c"),t.qZA())}function W(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",6),t.YNc(4,G,2,2,"select",11),t.YNc(5,V,2,1,"textarea",12),t.YNc(6,X,2,0,"i",13),t.qZA(),t.TgZ(7,"div",14),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw();return t.KtG(r.moveUp(a))}),t._uU(8," \u4e0a\u79fb "),t.qZA(),t.TgZ(9,"div",14),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw();return t.KtG(r.moveDown(a))}),t._uU(10," \u4e0b\u79fb "),t.qZA(),t.TgZ(11,"div",14),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw();return t.KtG(r.remove(a))}),t._uU(12," \u5220\u9664 "),t.qZA()()}if(2&o){const e=c.$implicit,i=c.index;t.xp6(2),t.hij(" ",i+1," "),t.xp6(2),t.Q6J("ngIf",!e.newLine&&e.isImg),t.xp6(1),t.Q6J("ngIf",!e.newLine&&!e.isImg),t.xp6(1),t.Q6J("ngIf",e.newLine)}}function tt(o,c){if(1&o&&t._UZ(0,"img",21),2&o){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("src",i.host+"/icon/"+e.contentImg,t.LSH)}}function et(o,c){1&o&&t._UZ(0,"br")}function nt(o,c){if(1&o&&(t.TgZ(0,"div",19),t._uU(1),t.YNc(2,tt,1,1,"img",20),t.YNc(3,et,1,0,"br",13),t.qZA()),2&o){const e=c.$implicit;let i;t.xp6(1),t.hij(" ",null!==(i=e.content)&&void 0!==i?i:""," "),t.xp6(1),t.Q6J("ngIf",e.contentImg),t.xp6(1),t.Q6J("ngIf",e.newLine)}}let ot=(()=>{class o{set conanCard(e){this.card=e,this.card.cardImg=this.card.cardImg?.replace(".png",".jpg");for(const i of this.card.featureList)i.contentImg&&(i.isImg=!0)}get conanCard(){return this.card}constructor(){this.host="https://cardarena.fun/conan/",this.opts=[{lable:"\u767b\u573a\u65f6",value:"ico_appearance.png"},{lable:"\u534f\u52a9",value:"ico_assist.png"},{lable:"\u7f81\u7eca",value:"ico_bond.png"},{lable:"\u5f39\u4e38",value:"ico_bullet.png"},{lable:"\u84dd",value:"ico_color_blue.png"},{lable:"\u7eff",value:"ico_color_green.png"},{lable:"\u7ea2",value:"ico_color_red.png"},{lable:"\u767d",value:"ico_color_white.png"},{lable:"\u9ec4",value:"ico_color_yellow.png"},{lable:"\u4ecb\u5165",value:"ico_cut_in.png"},{lable:"\u5ba3\u8a00",value:"ico_declare.png"},{lable:"\u5bf9\u624b\u56de\u5408\u4e2d",value:"ico_enemy_turn.png"},{lable:"\u8fc5\u901f",value:"ico_fast.png"},{lable:"\u7075\u5149\u4e00\u95ea",value:"ico_flash.png"},{lable:"\u8bef\u5bfc",value:"ico_mislead.png"},{lable:"\u6211\u65b9\u56de\u5408\u4e2d",value:"ico_my_turn.png"},{lable:"\u642d\u6863\u84dd",value:"ico_partner_blue.png"},{lable:"\u642d\u6863\u7eff",value:"ico_partner_green.png"},{lable:"\u642d\u6863\u7ea2",value:"ico_partner_red.png"},{lable:"\u642d\u6863\u767d",value:"ico_partner_white.png"},{lable:"\u642d\u6863\u9ec4",value:"ico_partner_yellow.png"},{lable:"\u7a81\u51fb",value:"ico_raid.png"},{lable:"\u7a81\u51fb[\u6848\u4ef6]",value:"ico_raid_case.png"},{lable:"\u7a81\u51fb[\u89d2\u8272]",value:"ico_raid_char.png"},{lable:"\u4ece\u73b0\u573a\u79fb\u9664\u65f6",value:"ico_scene_remove.png"},{lable:"\u4f11\u7720",value:"ico_sleep.png"},{lable:"\u641c\u67e5",value:"ico_search.png"},{lable:"\u89e3\u51b3\u7bc7",value:"ico_solution.png"},{lable:"\u4e8b\u4ef6\u89e3\u51b3",value:"ico_solved.png"},{lable:"\u56de\u54081",value:"ico_turn_1.png"}],this.save=new t.vpe}moveDown(e){if(e<this.card.featureList.length-1){const i=JSON.parse(JSON.stringify(this.card.featureList[e]));this.card.featureList[e]=JSON.parse(JSON.stringify(this.card.featureList[e+1])),this.card.featureList[e+1]=i}}moveUp(e){if(e>0){const i=JSON.parse(JSON.stringify(this.card.featureList[e]));this.card.featureList[e]=JSON.parse(JSON.stringify(this.card.featureList[e-1])),this.card.featureList[e-1]=i}}add(){this.card.featureList.push({content:"",cardDeckNo:this.card.cardDeckNo,sortOrder:this.card.featureList.length})}addNewLine(){this.card.featureList.push({newLine:!0,cardDeckNo:this.card.cardDeckNo,sortOrder:this.card.featureList.length})}addImg(){this.card.featureList.push({contentImg:"",isImg:!0,cardDeckNo:this.card.cardDeckNo,sortOrder:this.card.featureList.length})}saveClick(){for(let e=0;e<this.card.featureList.length;e++)this.card.featureList[e].sortOrder=e;this.save.emit(this.card)}remove(e){this.card.featureList.splice(e,1)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["conan-card-form"]],inputs:{conanCard:"conanCard"},outputs:{save:"save"},decls:27,vars:5,consts:[[1,"cover"],["alt","",3,"src"],[1,"bar"],["nz-button","","nzType","primary",3,"click"],[1,"grid"],[1,"cell"],[1,"content"],[1,"grid","has-action"],["class","cell",4,"ngFor","ngForOf"],["class","inner",4,"ngFor","ngForOf"],[1,"idx"],[3,"ngModel","ngModelChange",4,"ngIf"],["type","text","rows","4",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[1,"act",3,"click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","rows","4",3,"ngModel","ngModelChange"],[1,"inner"],["class","des","alt","",3,"src",4,"ngIf"],["alt","",1,"des",3,"src"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"div",2)(3,"span"),t._uU(4),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"button",3),t.NdJ("click",function(){return n.saveClick()}),t._uU(7,"\u4fdd\u5b58"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"button",3),t.NdJ("click",function(){return n.add()}),t._uU(10,"\u52a0\u6587\u5b57"),t.qZA(),t._UZ(11,"br"),t.TgZ(12,"button",3),t.NdJ("click",function(){return n.addImg()}),t._uU(13,"\u52a0\u56fe\u7247"),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"button",3),t.NdJ("click",function(){return n.addNewLine()}),t._uU(16,"\u52a0\u6362\u884c"),t.qZA()()(),t.TgZ(17,"div",4)(18,"div",5)(19,"div",6),t._uU(20),t.qZA()()(),t.TgZ(21,"div",7),t.YNc(22,W,13,4,"div",8),t.qZA(),t.TgZ(23,"div",4)(24,"div",5)(25,"div",6),t.YNc(26,nt,4,3,"div",9),t.qZA()()()),2&i){let a;t.xp6(1),t.Q6J("src",n.host+"/thumbnails/"+n.conanCard.cardImg,t.LSH),t.xp6(3),t.Oqu(n.conanCard.cardDeckNo),t.xp6(16),t.hij(" ",null!==(a=n.conanCard.feature)&&void 0!==a?a:""," "),t.xp6(2),t.Q6J("ngForOf",n.conanCard.featureList),t.xp6(4),t.Q6J("ngForOf",n.conanCard.featureList)}},dependencies:[C.sg,C.O5,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.On,y.ix,x.w,Z.dQ],styles:["[_nghost-%COMP%]{display:inline-flex;flex-direction:row;width:1200px;min-height:300px;padding-bottom:1rem}.cover[_ngcontent-%COMP%]{width:300px;height:100%}.cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.bar[_ngcontent-%COMP%]{width:400px;height:4rem;display:inline-flex;align-items:center;justify-content:space-between}.grid[_ngcontent-%COMP%]{width:400px;height:100%;overflow:auto}.cell[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;font-size:12px}.cell[_ngcontent-%COMP%]   .idx[_ngcontent-%COMP%]{width:1rem;border:1px solid #000}.cell[_ngcontent-%COMP%]   .act[_ngcontent-%COMP%]{width:2rem;border:1px solid #000}.cell[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:1px solid #000;width:400px}.cell[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:inline}.cell[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .cell[_ngcontent-%COMP%]   img.des[_ngcontent-%COMP%]{height:1rem}.cell[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}.has-action[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:calc(300px - 6rem)}"]})}return o})();function it(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"conan-card-form",3),t.NdJ("save",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onSaveFeature(n))}),t.qZA()}2&o&&t.Q6J("conanCard",c.$implicit)}let at=(()=>{class o{constructor(e){this.uaCardService=e,this.conanCardList=[]}ngOnInit(){this.uaCardService.getConanCardList().subscribe(e=>{this.conanCardList=e})}onSaveFeature(e){this.uaCardService.updateFeature(e).subscribe(i=>{alert("\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(w.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dccg-translator"]],decls:4,vars:1,consts:[[1,"table-container"],[1,"table-wrapper"],[3,"conanCard","save",4,"ngFor","ngForOf"],[3,"conanCard","save"]],template:function(i,n){1&i&&(t.TgZ(0,"nz-layout")(1,"nz-content",0)(2,"div",1),t.YNc(3,it,1,1,"conan-card-form",2),t.qZA()()()),2&i&&(t.xp6(3),t.Q6J("ngForOf",n.conanCardList))},dependencies:[C.sg,M.hw,M.OK,ot],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;flex-direction:row;position:relative}[_nghost-%COMP%]   nz-layout[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;position:relative;transition:2s all ease;background-color:#fff;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;top:2.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fff}"]})}return o})();var p=function(o){return o.Character="Character",o.Event="Event",o.Field="Field",o.ActionPoint="ActionPoint",o}(p||{}),h=function(o){return o.Green="Green",o.Red="Red",o.Blue="Blue",o.Yellow="Yellow",o.Purple="Purple",o}(h||{});const z={[h.Green]:"\u7eff",[h.Red]:"\u7ea2",[h.Blue]:"\u84dd",[h.Yellow]:"\u9ec4",[h.Purple]:"\u7d2b"},N=[{value:h.Green,label:z[h.Green]},{value:h.Red,label:z[h.Red]},{value:h.Blue,label:z[h.Blue]},{value:h.Yellow,label:z[h.Yellow]},{value:h.Purple,label:z[h.Purple]}];var s=function(o){return o.Active="Active",o.Get="Get",o.Draw="Draw",o.Raid="Raid",o.Color="Color",o.Final="Final",o.Special="Special",o}(s||{});const v={[s.Active]:"\u6fc0\u6d3b",[s.Get]:"\u83b7\u5f97",[s.Draw]:"\u62bd\u724c",[s.Raid]:"\u7a81\u8fdb",[s.Color]:"Color",[s.Final]:"Final",[s.Special]:"Special"},U=[{label:v[s.Active],value:s.Active},{label:v[s.Get],value:s.Get},{label:v[s.Draw],value:s.Draw},{label:v[s.Raid],value:s.Raid},{label:v[s.Color],value:s.Color},{label:v[s.Special],value:s.Special},{label:v[s.Final],value:s.Final}];var O=d(8070);function rt(o,c){if(1&o&&t._UZ(0,"img",10),2&o){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("src",i.host+e.effectImg,t.LSH)}}function ct(o,c){if(1&o&&(t.TgZ(0,"div",6)(1,"div",7),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.YNc(5,rt,1,1,"img",9),t.qZA()()),2&o){const e=c.$implicit,i=c.index;t.xp6(2),t.hij(" ",i+1," "),t.xp6(2),t.hij(" ",e.effectImg?"":e.effect," "),t.xp6(1),t.Q6J("ngIf",e.effectImg)}}function st(o,c){if(1&o&&t._UZ(0,"img",14),2&o){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("src",i.host+e.effectImg,t.LSH)}}function lt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"textarea",15),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw().$implicit;return t.KtG(a.effect=n)}),t._uU(1,"\t\t\t"),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.Q6J("ngModel",e.effect)}}function dt(o,c){1&o&&(t.TgZ(0,"i"),t._uU(1,"\u6362\u884c"),t.qZA())}function gt(o,c){if(1&o&&(t.TgZ(0,"div",6)(1,"div",7),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t.YNc(4,st,1,1,"img",11),t.YNc(5,lt,2,1,"textarea",12),t.YNc(6,dt,2,0,"i",13),t.qZA()()),2&o){const e=c.$implicit,i=c.index;t.xp6(2),t.hij(" ",i+1," "),t.xp6(2),t.Q6J("ngIf",e.effectImg),t.xp6(1),t.Q6J("ngIf",!e.newLine&&!e.effectImg),t.xp6(1),t.Q6J("ngIf",e.newLine)}}let pt=(()=>{class o{set uaCard(e){this.card=e,this.card.cardImg=this.card.cardImg?.replace(".png",".jpg")}get uaCard(){return this.card}constructor(){this.host="https://cardarena.fun/assets/",this.save=new t.vpe}moveDown(e){if(e<this.card.effectsZh.length-1){const i=JSON.parse(JSON.stringify(this.card.effectsZh[e]));this.card.effectsZh[e]=JSON.parse(JSON.stringify(this.card.effectsZh[e+1])),this.card.effectsZh[e+1]=i}}moveUp(e){if(e>0){const i=JSON.parse(JSON.stringify(this.card.effectsZh[e]));this.card.effectsZh[e]=JSON.parse(JSON.stringify(this.card.effectsZh[e-1])),this.card.effectsZh[e-1]=i}}add(){this.card.effectsZh.push({effect:"",cardId:this.card.id,sortOrder:this.card.effectsZh.length})}saveClick(){this.save.emit(this.card)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["card-form"]],inputs:{uaCard:"uaCard"},outputs:{save:"save"},decls:11,vars:4,consts:[[1,"cover"],["alt","",3,"src"],[1,"bar"],["nz-button","","nzType","primary",3,"click"],[1,"grid"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"idx"],[1,"content"],["class","des","alt","","loading","lazy","decoding","async",3,"src",4,"ngIf"],["alt","","loading","lazy","decoding","async",1,"des",3,"src"],["class","des","alt","",3,"src",4,"ngIf"],["type","text","rows","4",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],["alt","",1,"des",3,"src"],["type","text","rows","4",3,"ngModel","ngModelChange"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"div",2)(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.saveClick()}),t._uU(6,"\u4fdd\u5b58"),t.qZA()()(),t.TgZ(7,"div",4),t.YNc(8,ct,6,3,"div",5),t.qZA(),t.TgZ(9,"div",4),t.YNc(10,gt,7,4,"div",5),t.qZA()),2&i&&(t.xp6(1),t.Q6J("src",n.host+n.uaCard.cardImg,t.LSH),t.xp6(3),t.Oqu(n.uaCard.cardRealNo),t.xp6(4),t.Q6J("ngForOf",n.uaCard.effects),t.xp6(2),t.Q6J("ngForOf",n.uaCard.effectsZh))},dependencies:[C.sg,C.O5,u.Fj,u.JJ,u.On,y.ix,x.w,Z.dQ],styles:["[_nghost-%COMP%]{display:inline-flex;flex-direction:row;width:800px;min-height:300px;padding-bottom:1rem}.cover[_ngcontent-%COMP%]{width:300px;height:100%}.cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.bar[_ngcontent-%COMP%]{width:200px;height:4rem;display:inline-flex;align-items:center;justify-content:center}.grid[_ngcontent-%COMP%]{width:300px;height:100%;overflow:auto}.cell[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;font-size:12px}.cell[_ngcontent-%COMP%]   .idx[_ngcontent-%COMP%]{width:1rem;border:1px solid #000}.cell[_ngcontent-%COMP%]   .act[_ngcontent-%COMP%]{width:2rem;border:1px solid #000}.cell[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:1px solid #000;width:calc(300px - 3rem)}.cell[_ngcontent-%COMP%]   img.des[_ngcontent-%COMP%]{height:1rem}.cell[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}"]})}return o})(),ut=(()=>{class o{transform(e,i){return e.filter(n=>!i||n.needEnergyType===i)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275pipe=t.Yjl({name:"uaCardColorFilter",type:o,pure:!0})}return o})();function _t(o,c){if(1&o&&t._UZ(0,"nz-option",9),2&o){const e=c.$implicit;t.Q6J("nzValue",e.id)("nzLabel",e.ipTitle)}}function ht(o,c){if(1&o&&t._UZ(0,"nz-option",9),2&o){const e=c.$implicit;t.Q6J("nzValue",e.value)("nzLabel",e.label)}}function Ct(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"card-form",10),t.NdJ("save",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onSave(n))}),t.qZA()}2&o&&t.Q6J("uaCard",c.$implicit)}let ft=(()=>{class o{constructor(e){this.uaCardService=e,this.cardList=[],this.ipList=[],this.EnergyTypeList=N,this.currentIpId=void 0,this.currentType=void 0}ngOnInit(){this.uaCardService.getIpList().subscribe(e=>{this.ipList=e})}onIpChange(){this.uaCardService.getCardListByIpId(this.currentIpId).subscribe(e=>{this.cardList=e})}foreRefresh(){this.uaCardService.forceRefresh(this.currentIpId).subscribe(e=>{alert("\u5237\u65b0\u6210\u529f")})}onSave(e){this.uaCardService.updateEffect(e.id,e.effectsZh??[]).subscribe(i=>{alert("\u4fdd\u5b58\u6210\u529f")})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(w.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-ua-translator"]],decls:13,vars:14,consts:[[1,"table-container"],[1,"table-wrapper"],[1,"filter"],[3,"ngModel","nzPlaceHolder","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzAllowClear","true",3,"ngModel","nzPlaceHolder","ngModelChange"],["nz-button","",3,"click"],[1,"container"],[3,"uaCard","save",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"uaCard","save"]],template:function(i,n){1&i&&(t.TgZ(0,"nz-layout")(1,"nz-content",0)(2,"div",1)(3,"div",2)(4,"nz-select",3),t.NdJ("ngModelChange",function(r){return n.currentIpId=r})("ngModelChange",function(){return n.onIpChange()}),t.YNc(5,_t,1,2,"nz-option",4),t.qZA(),t.TgZ(6,"nz-select",5),t.NdJ("ngModelChange",function(r){return n.currentType=r}),t.YNc(7,ht,1,2,"nz-option",4),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return n.foreRefresh()}),t._uU(9,"\u5237\u65b0\u5230\u7ebf\u4e0a"),t.qZA()(),t.TgZ(10,"div",7),t.YNc(11,Ct,1,1,"card-form",8),t.ALo(12,"uaCardColorFilter"),t.qZA()()()()),2&i&&(t.xp6(4),t.Udp("width","300px"),t.Q6J("ngModel",n.currentIpId)("nzPlaceHolder","\u8bf7\u9009\u62e9IP"),t.xp6(1),t.Q6J("ngForOf",n.ipList),t.xp6(1),t.Udp("width","100px"),t.Q6J("ngModel",n.currentType)("nzPlaceHolder","\u989c\u8272"),t.xp6(1),t.Q6J("ngForOf",n.EnergyTypeList),t.xp6(4),t.Q6J("ngForOf",t.xi3(12,11,n.cardList,n.currentType)))},dependencies:[C.sg,u.JJ,u.On,M.hw,M.OK,y.ix,x.w,Z.dQ,O.Ip,O.Vq,pt,ut],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;flex-direction:row;position:relative}[_nghost-%COMP%]   nz-layout[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;position:relative;transition:2s all ease;background-color:#fff;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:2.5rem;display:flex;justify-content:start;align-items:center}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;top:2.5rem;overflow-x:hidden;overflow-y:auto}"]})}return o})();var mt=d(5592),Mt=d(4829);const{isArray:vt}=Array;var bt=d(6232),Pt=d(8251),Tt=d(9940);function D(...o){const c=(0,Tt.jO)(o),e=function Ot(o){return 1===o.length&&vt(o[0])?o[0]:o}(o);return e.length?new mt.y(i=>{let n=e.map(()=>[]),a=e.map(()=>!1);i.add(()=>{n=a=null});for(let r=0;!i.closed&&r<e.length;r++)(0,Mt.Xf)(e[r]).subscribe((0,Pt.x)(i,f=>{if(n[r].push(f),n.every(_=>_.length)){const _=n.map(m=>m.shift());i.next(c?c(..._):_),n.some((m,b)=>!m.length&&a[b])&&i.complete()}},()=>{a[r]=!0,!n[r].length&&i.complete()}));return()=>{n=a=null}}):bt.E}class I{}class S{}class A{}var Q=d(6691),k=d(7907);const wt=["*"];let E=(()=>{class o{set uaCard(e){this.card=e,this.card.cardImg=this.card.cardImg?.replace(".png",".jpg")}get uaCard(){return this.card}constructor(){this.host="https://cardarena.fun/assets/"}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["card-item"]],inputs:{uaCard:"uaCard"},ngContentSelectors:wt,decls:4,vars:1,consts:[[1,"cover"],["alt","",3,"src"],[1,"bar"]],template:function(i,n){1&i&&(t.F$t(),t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"div",2),t.Hsn(3),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("src",n.host+n.uaCard.cardImg,t.LSH))},styles:["[_nghost-%COMP%]{display:inline-block;position:relative;width:150px;height:210px}.cover[_ngcontent-%COMP%]{width:150px;height:100%}.cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.bar[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}.grid[_ngcontent-%COMP%]{width:300px;height:100%;overflow:auto}.cell[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row;font-size:12px}.cell[_ngcontent-%COMP%]   .idx[_ngcontent-%COMP%]{width:1rem;border:1px solid #000}.cell[_ngcontent-%COMP%]   .act[_ngcontent-%COMP%]{width:2rem;border:1px solid #000}.cell[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:1px solid #000;width:calc(300px - 3rem)}.cell[_ngcontent-%COMP%]   img.des[_ngcontent-%COMP%]{height:1rem}.cell[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}"]})}return o})(),q=(()=>{class o{transform(e,i){return void 0===i?e:e.filter(n=>n.cardCategory===i)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275pipe=t.Yjl({name:"cardFilter",type:o,pure:!0})}return o})();function kt(o,c){if(1&o&&(t.TgZ(0,"div",12)(1,"card-item",13)(2,"div",14)(3,"span"),t._uU(4),t.qZA()()()()),2&o){const e=c.$implicit,i=t.oxw();t.xp6(1),t.Q6J("uaCard",e),t.xp6(3),t.Oqu(i.idCountMap[e.id])}}function yt(o,c){if(1&o&&(t.TgZ(0,"div",15),t._UZ(1,"img",16),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&o){const e=c.$implicit,i=t.oxw();t.xp6(1),t.Q6J("src","https://cardarena.fun/assets/zh/images/cardlist/icon/trigger/ico_"+e.value.toLowerCase()+"_trigger.png",t.LSH),t.xp6(2),t.hij("x",i.triggerCountMap[e.value.toLowerCase()],"")}}function xt(o,c){if(1&o&&(t.TgZ(0,"div",15),t._UZ(1,"img",17),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&o){const e=c.$implicit,i=t.oxw();t.xp6(1),t.Q6J("src","https://cardarena.fun/assets/jp/images/cardlist/icon/need/ico_character_energy_"+e+".png",t.LSH),t.xp6(2),t.hij("x",i.energyCountMap[e],"")}}let Y=(()=>{class o{set userDeck(e){this.deck=e,this.init()}constructor(e,i){this.uaCardService=e,this.nzMessage=i,this.deck=new S,this.ip=new I,this.cardList=[],this.filtedCardList=[],this.idCountMap={},this.cardDeckNoCountMap={},this.colorCount=0,this.specialCount=0,this.finalCount=0,this.filterType=void 0,this.selectedIndex=0,this.totalTrigger=0,this.totalCharacter=0,this.totalEvent=0,this.totalField=0,this.totalCount=0,this.cardAllList=[],this.triggerCountMap={},this.energyCountMap={},this.energyTypeKeys=[],this.TriggerTypeList=U,this.EnergyTypeList=N,this.color=void 0}onColorChange(){if(void 0===this.color)return void(this.filtedCardList=this.cardList);const e=[];for(const i of this.cardList)i.needEnergyType===this.color&&e.push(i);this.filtedCardList=e}onRankChange(){this.deck.ranked&&(this.deck.published=!0)}init(){D(this.uaCardService.getIpById(this.deck.ipId),this.uaCardService.getCardListByIpId(this.deck.ipId),this.uaCardService.getUserDeckById(this.deck.id)).subscribe(([e,i,n])=>{this.ip=e,this.cardList=i,this.filtedCardList=i,Object.assign(this.deck,n),this.prepare()})}prepare(){const e={};this.cardList.map(a=>{e[a.id]=a});const i={},n={};for(const a of this.deck.cardList??[]){i[a.id]=a.count;const r=e[a.id];r&&(n[r.cardDeckNo]||(n[r.cardDeckNo]=0),n[r.cardDeckNo]+=a.count)}this.idCountMap=i,this.cardDeckNoCountMap=n,this.refreshInfo()}refreshInfo(){const e=[],i=[],n={},a={},r=[];let f=0,_=0,m=0,b=0,F=0;const P={};for(const l of this.cardList){if(this.cardDeckNoCountMap[l.cardDeckNo]&&!e.includes(l.cardDeckNo)){e.push(l.cardDeckNo);const g=this.cardDeckNoCountMap[l.cardDeckNo];l.triggerType&&(n[l.triggerType.toString().toLowerCase()]||(n[l.triggerType.toString().toLowerCase()]=0),n[l.triggerType.toString().toLowerCase()]+=g,f+=g)}if(this.idCountMap[l.id]){switch(l.cardCategory){case p.Character:_+=this.idCountMap[l.id];break;case p.Event:m+=this.idCountMap[l.id];break;case p.Field:b+=this.idCountMap[l.id]}F+=this.idCountMap[l.id],i.push(l);const g=`${l.needEnergyType.toLowerCase()+l.needEnergyCount}`;P[g]=l.needEnergyCount,a[g]||(a[g]=0),r.includes(g)||r.push(g),a[g]+=this.idCountMap[l.id]}}r.sort((l,g)=>P[l]-P[g]),this.finalCount=n[s.Final.toLowerCase()]?n[s.Final.toLowerCase()]:0,this.colorCount=n[s.Color.toLowerCase()]?n[s.Color.toLowerCase()]:0,this.specialCount=n[s.Special.toLowerCase()]?n[s.Special.toLowerCase()]:0,this.totalCount=F,this.totalTrigger=f,this.totalCharacter=_,this.totalEvent=m,this.totalField=b,this.cardAllList=i,this.triggerCountMap=n,this.energyCountMap=a,this.energyTypeKeys=r}select(e){this.selectedIndex=e,0===this.selectedIndex&&(this.filterType=void 0),1===this.selectedIndex&&(this.filterType=p.Character),2===this.selectedIndex&&(this.filterType=p.Event),3===this.selectedIndex&&(this.filterType=p.Field)}onIncrease(e){if(e.triggerType){let i=!1;switch(e.triggerType){case s.Color:i=this.colorCount>=4,i||this.colorCount++;break;case s.Final:i=this.finalCount>=4,i||this.finalCount++;break;case s.Special:i=this.specialCount>=4,i||this.specialCount++}if(i)return void this.nzMessage.warning(`\u300c${v[e.triggerType]}\u300d\u89e6\u53d1\u6700\u591a\u53ea\u80fd\u6295\u51654\u5f20`)}if(e.cardConflict){const i=e.cardConflict.split(",");for(const n of i)if(this.cardDeckNoCountMap[n])return void this.nzMessage.warning(`\u5361\u7ec4\u4e2d\u5b58\u5728\u300c${n}\u300d\uff0c\u65e0\u6cd5\u6295\u5165\u672c\u5361\u7247\u3002`)}if(this.cardDeckNoCountMap[e.cardDeckNo]){if(+this.cardDeckNoCountMap[e.cardDeckNo]>=e.limitCount)return void this.nzMessage.warning(`\u300c${e.cardName}(${e.cardDeckNo})\u300d\u6700\u591a\u53ea\u80fd\u6295\u5165${e.limitCount}\u5f20`);this.cardDeckNoCountMap[e.cardDeckNo]++,this.idCountMap[e.id]?this.idCountMap[e.id]++:this.idCountMap[e.id]=1}else this.cardDeckNoCountMap[e.cardDeckNo]=1,this.idCountMap[e.id]=1;this.refreshInfo()}onDecrease(e){if(!(+this.idCountMap[e.id]<=0)){if(e.triggerType)switch(e.triggerType){case s.Color:this.colorCount--,this.colorCount<0&&(this.colorCount=0);break;case s.Final:this.finalCount--,this.finalCount<0&&(this.finalCount=0);break;case s.Special:this.specialCount--,this.specialCount<0&&(this.specialCount=0)}this.cardDeckNoCountMap[e.cardDeckNo]--,this.idCountMap[e.id]--,this.refreshInfo()}}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(w.K),t.Y36(Q.dD))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["user-deck"]],inputs:{userDeck:"userDeck"},decls:23,vars:15,consts:[[1,"container"],[1,"content"],[1,"left"],[1,"deck"],[1,"card-list"],[1,"tab"],[3,"ngModel","ngModelChange"],["nz-radio-button","",3,"nzValue"],["class","card",4,"ngFor","ngForOf"],[1,"statistics"],[1,"row"],["class","column",4,"ngFor","ngForOf"],[1,"card"],[3,"uaCard"],[1,"handle"],[1,"column"],["alt","",1,"trigger",3,"src"],["alt","",1,"energy",3,"src"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"nz-radio-group",6),t.NdJ("ngModelChange",function(r){return n.selectedIndex=r})("ngModelChange",function(r){return n.select(r)}),t.TgZ(7,"label",7),t._uU(8),t.qZA(),t.TgZ(9,"label",7),t._uU(10),t.qZA(),t.TgZ(11,"label",7),t._uU(12),t.qZA(),t.TgZ(13,"label",7),t._uU(14),t.qZA()()(),t.YNc(15,kt,5,2,"div",8),t.ALo(16,"cardFilter"),t.qZA()(),t.TgZ(17,"div",9)(18,"div",4)(19,"div",10),t.YNc(20,yt,4,2,"div",11),t.qZA(),t.TgZ(21,"div",10),t.YNc(22,xt,4,2,"div",11),t.qZA()()()()()()),2&i&&(t.xp6(6),t.Q6J("ngModel",n.selectedIndex),t.xp6(1),t.Q6J("nzValue",0),t.xp6(1),t.hij("\u5168\u90e8",n.totalCount,""),t.xp6(1),t.Q6J("nzValue",1),t.xp6(1),t.hij("\u89d2\u8272",n.totalCharacter,""),t.xp6(1),t.Q6J("nzValue",2),t.xp6(1),t.hij("\u4e8b\u4ef6",n.totalEvent,""),t.xp6(1),t.Q6J("nzValue",3),t.xp6(1),t.hij("\u573a\u5730",n.totalField,""),t.xp6(1),t.Q6J("ngForOf",t.xi3(16,12,n.cardAllList,n.filterType)),t.xp6(5),t.Q6J("ngForOf",n.TriggerTypeList),t.xp6(2),t.Q6J("ngForOf",n.energyTypeKeys))},dependencies:[C.sg,u.JJ,u.On,k.Of,k.Bq,k.Dg,E,q],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;flex-direction:row;position:relative}[_nghost-%COMP%]   nz-layout[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;top:2.5rem;overflow-x:hidden;overflow-y:auto;display:flex}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;background-color:#eee}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:inline-block;padding:.25rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;width:20%;background-color:#000000b3}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:1.2em}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .card-list[_ngcontent-%COMP%]{background-color:#fff;padding:.5rem;overflow:auto;height:100%}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:100%;height:100%;display:inline-flex;overflow:hidden;flex-direction:column;padding:.5rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]{width:100%;height:calc(100% - 10rem);overflow:auto;display:block;position:relative}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{background-color:#fff;padding:.5rem;height:3rem;position:sticky;z-index:100;top:0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .card-list[_ngcontent-%COMP%]{padding-top:0!important}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]{width:100%;height:10rem;overflow:auto;display:block;position:relative;border-top:1px solid #000}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:.5rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:50%;height:100%}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   img.trigger[_ngcontent-%COMP%]{height:20px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   img.energy[_ngcontent-%COMP%]{height:40px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:50%;height:100%;display:inline-block;overflow:hidden;padding:.5rem;border-radius:1rem}"]})}return o})();var j=d(4074),Zt=d(2274),$=d(2962),zt=d(6928);function Nt(o,c){if(1&o&&t._UZ(0,"nz-option",10),2&o){const e=c.$implicit;t.Q6J("nzValue",e.value)("nzLabel",e.label)}}function Ft(o,c){if(1&o&&t._UZ(0,"nz-option",10),2&o){const e=c.$implicit;t.Q6J("nzValue",e.value)("nzLabel",e.label)}}function Lt(o,c){if(1&o&&t._UZ(0,"nz-avatar",16),2&o){const e=t.oxw().$implicit;t.Q6J("nzSrc","https://cardarena.fun/assets/jp/images/cardlist/icon/resource/ico_resource_energy_"+(null==e.mainEnergyType?null:e.mainEnergyType.toLowerCase())+"1.png")}}function Dt(o,c){if(1&o&&t._UZ(0,"img",17),2&o){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("src","https://cardarena.fun/assets"+i.ipMap[e.ipId].ipTitleLogo,t.LSH)}}function Jt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.view(a))}),t.TgZ(1,"nz-card",12),t._UZ(2,"nz-card-meta",13),t.qZA(),t.YNc(3,Lt,1,1,"ng-template",null,14,t.W1O),t.YNc(5,Dt,1,1,"ng-template",null,15,t.W1O),t.qZA()}if(2&o){const e=c.$implicit,i=t.MAs(4),n=t.MAs(6);t.xp6(1),t.Q6J("nzCover",n),t.xp6(1),t.Q6J("nzTitle",e.name)("nzDescription",e.userNickName)("nzAvatar",i)}}function Ut(o,c){if(1&o&&(t.TgZ(0,"div",18),t._UZ(1,"user-deck",19),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("userDeck",e.selectedDeck)}}let It=(()=>{class o{constructor(e,i,n,a){this.uaCardService=e,this.globalService=i,this.router=n,this.activatedRoute=a,this.uaUserDeckSearchDto=new A,this.ipList=[],this.EnergyTypeList=N,this.tagList=[],this.page=1,this.total=1,this.pageSize=20,this.deckList=[],this.ipMap={},this.isMydeck=!0}ngOnInit(){window.location.href.indexOf("all-deck")>-1&&(this.isMydeck=!1),this.prepare()}prepare(){D(this.uaCardService.getIpList(),this.uaCardService.getUserTagList()).subscribe(([e,i])=>{for(const n of e)this.ipList.push({value:n.id,label:n.ipTitle}),this.ipMap[n.id]=n;this.tagList=i,this.reset()})}reset(){this.uaUserDeckSearchDto=new A,this.isMydeck&&(this.uaUserDeckSearchDto.userId=this.globalService.userInfo?.id),this.page=1,this.search()}pageChange(e){this.page=e,this.search()}search(){for(const e in this.uaUserDeckSearchDto)this.uaUserDeckSearchDto[e]||delete this.uaUserDeckSearchDto[e];this.uaCardService.getUserDeck(this.uaUserDeckSearchDto,this.page).subscribe(e=>{this.total=e.meta.itemCount,this.pageSize=e.meta.take,this.deckList=e.data})}view(e){this.selectedDeck=e}edit(e){e.userId!==this.globalService.userInfo?.id&&this.router.navigate(["..","edit",e.ipId,e.id],{relativeTo:this.activatedRoute})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(w.K),t.Y36(j.U),t.Y36(T.F0),t.Y36(T.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-user-deck-list"]],decls:17,vars:18,consts:[[1,"table-container"],[1,"table-wrapper"],[1,"filter"],["nzAllowClear","true",3,"ngModel","nzPlaceHolder","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-button","",3,"click"],["nzShowQuickJumper","",3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"],[1,"container"],["class","deck",3,"click",4,"ngFor","ngForOf"],["class","half",4,"ngIf"],[3,"nzValue","nzLabel"],[1,"deck",3,"click"],[3,"nzCover"],[3,"nzTitle","nzDescription","nzAvatar"],["avatarTemplate",""],["coverTemplate",""],[3,"nzSrc"],[3,"src"],[1,"half"],[3,"userDeck"]],template:function(i,n){1&i&&(t.TgZ(0,"nz-layout")(1,"nz-content",0)(2,"div",1)(3,"div",2)(4,"nz-select",3),t.NdJ("ngModelChange",function(r){return n.uaUserDeckSearchDto.ipId=r})("ngModelChange",function(){return n.search()}),t.YNc(5,Nt,1,2,"nz-option",4),t.qZA(),t.TgZ(6,"nz-select",3),t.NdJ("ngModelChange",function(r){return n.uaUserDeckSearchDto.mainEnergyType=r})("ngModelChange",function(){return n.search()}),t.YNc(7,Ft,1,2,"nz-option",4),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return n.reset()}),t._uU(9,"\u91cd\u7f6e"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"\u5206\u9875\uff1a"),t.qZA(),t.TgZ(12,"nz-pagination",6),t.NdJ("nzPageIndexChange",function(r){return n.pageChange(r)}),t.qZA()(),t.TgZ(13,"div",7)(14,"div"),t.YNc(15,Jt,7,4,"div",8),t.qZA(),t.YNc(16,Ut,2,1,"div",9),t.qZA()()()()),2&i&&(t.xp6(4),t.Udp("width","300px"),t.Q6J("ngModel",n.uaUserDeckSearchDto.ipId)("nzPlaceHolder","\u8bf7\u9009\u62e9IP"),t.xp6(1),t.Q6J("ngForOf",n.ipList),t.xp6(1),t.Udp("width","100px"),t.Q6J("ngModel",n.uaUserDeckSearchDto.mainEnergyType)("nzPlaceHolder","\u989c\u8272"),t.xp6(1),t.Q6J("ngForOf",n.EnergyTypeList),t.xp6(5),t.Q6J("nzPageIndex",n.page)("nzTotal",n.total)("nzPageSize",n.pageSize),t.xp6(2),t.Tol(n.selectedDeck?"half":"whole"),t.xp6(1),t.Q6J("ngForOf",n.deckList),t.xp6(1),t.Q6J("ngIf",n.selectedDeck))},dependencies:[C.sg,C.O5,u.JJ,u.On,Zt.dE,M.hw,M.OK,y.ix,x.w,Z.dQ,O.Ip,O.Vq,$.bd,$.l7,zt.Dz,Y],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;flex-direction:row;position:relative}[_nghost-%COMP%]   nz-layout[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;position:relative;transition:2s all ease;background-color:#fff;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:2.5rem;display:flex;justify-content:start;align-items:center}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;top:2.5rem;overflow:hidden;background-color:#eee}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .half[_ngcontent-%COMP%]{width:50%;height:100%;display:inline-block;padding:.5rem;border-radius:1rem;overflow:auto}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .whole[_ngcontent-%COMP%]{width:100%;height:100%;display:block;padding:.5rem;border-radius:1rem;overflow:auto}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]{width:250px;display:inline-block;padding:.25rem;border-radius:1rem;background-color:#fff;margin:.25rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{border:none}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]     .ant-card-body{padding:.25rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]     .ant-card-meta-title{margin:0}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]     .ant-card-meta-detail{font-size:12px}"]})}return o})();var St=d(824),At=d(6494);function Qt(o,c){if(1&o&&t._UZ(0,"nz-option",22),2&o){const e=c.$implicit;t.Q6J("nzValue",e.value)("nzLabel",e.label)}}function Et(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",23)(1,"card-item",24)(2,"div",25)(3,"button",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onDecrease(a))}),t._uU(4,"-"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.TgZ(7,"button",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onIncrease(a))}),t._uU(8,"+"),t.qZA()()()()}if(2&o){const e=c.$implicit,i=t.oxw();t.xp6(1),t.Q6J("uaCard",e),t.xp6(5),t.Oqu(i.idCountMap[e.id])}}function qt(o,c){if(1&o&&(t.TgZ(0,"div",4),t._UZ(1,"img",26),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&o){const e=c.$implicit,i=t.oxw();t.xp6(1),t.Q6J("src","https://cardarena.fun/assets/zh/images/cardlist/icon/trigger/ico_"+e.value.toLowerCase()+"_trigger.png",t.LSH),t.xp6(2),t.hij("x",i.triggerCountMap[e.value.toLowerCase()],"")}}function Yt(o,c){if(1&o&&(t.TgZ(0,"div",4),t._UZ(1,"img",27),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&o){const e=c.$implicit,i=t.oxw();t.xp6(1),t.Q6J("src","https://cardarena.fun/assets/jp/images/cardlist/icon/need/ico_character_energy_"+e+".png",t.LSH),t.xp6(2),t.hij("x",i.energyCountMap[e],"")}}function jt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",23)(1,"card-item",24)(2,"div",25)(3,"button",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onDecrease(a))}),t._uU(4,"-"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.TgZ(7,"button",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onIncrease(a))}),t._uU(8,"+"),t.qZA()()()()}if(2&o){const e=c.$implicit,i=t.oxw();let n;t.xp6(1),t.Q6J("uaCard",e),t.xp6(5),t.Oqu(null!==(n=i.idCountMap[e.id])&&void 0!==n?n:0)}}function H(o,c,e,i,n,a,r){try{var f=o[a](r),_=f.value}catch(m){return void e(m)}f.done?c(_):Promise.resolve(_).then(i,n)}function Rt(o,c){if(1&o&&t._UZ(0,"nz-option",10),2&o){const e=c.$implicit;t.Q6J("nzValue",e.id)("nzLabel",e.ipTitle)}}function Bt(o,c){if(1&o&&t._UZ(0,"nz-option",10),2&o){const e=c.$implicit;t.Q6J("nzValue",e.value)("nzLabel",e.label)}}function Kt(o,c){if(1&o&&t._UZ(0,"nz-option",10),2&o){const e=c.$implicit;t.Q6J("nzValue",e)("nzLabel",e)}}function Gt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.genGen1())}),t._uU(1," \u751f\u6210JSON "),t.qZA()}}function Vt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.genGen3())}),t._uU(1," \u5408\u5e76JSON "),t.qZA()}}function Xt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.copy())}),t._uU(1," \u590d\u5236\u5408\u5e76\u7684\u6570\u636e "),t.qZA()}}const R=[{path:"list",component:It},{path:"detail/:ipId/:deckId",component:Y},{path:"edit/:ipId/:deckId",component:(()=>{class o{constructor(e,i,n,a,r){this.uaCardService=e,this.router=i,this.activatedRoute=n,this.nzMessage=a,this.globalService=r,this.ip=new I,this.cardList=[],this.filtedCardList=[],this.deck=new S,this.idCountMap={},this.cardDeckNoCountMap={},this.colorCount=0,this.specialCount=0,this.finalCount=0,this.filterType=void 0,this.selectedIndex=0,this.totalTrigger=0,this.totalCharacter=0,this.totalEvent=0,this.totalField=0,this.totalCount=0,this.cardAllList=[],this.triggerCountMap={},this.energyCountMap={},this.energyTypeKeys=[],this.TriggerTypeList=U,this.EnergyTypeList=N,this.color=void 0}onColorChange(){if(void 0===this.color)return void(this.filtedCardList=this.cardList);const e=[];for(const i of this.cardList)i.needEnergyType===this.color&&e.push(i);this.filtedCardList=e}onRankChange(){this.deck.ranked&&(this.deck.published=!0)}ngOnInit(){const e=this.activatedRoute.snapshot;D(this.uaCardService.getIpById(e.params.ipId),this.uaCardService.getCardListByIpId(e.params.ipId),this.uaCardService.getUserDeckById(e.params.deckId)).subscribe(([i,n,a])=>{this.ip=i,this.cardList=n,this.filtedCardList=n,this.deck=a,this.deck.userId=this.globalService.userInfo?.id,this.deck.userNickName=this.globalService.userInfo?.nickName,this.prepare()})}prepare(){const e={};this.cardList.map(a=>{e[a.id]=a});const i={},n={};for(const a of this.deck.cardList??[]){i[a.id]=a.count;const r=e[a.id];r&&(n[r.cardDeckNo]||(n[r.cardDeckNo]=0),n[r.cardDeckNo]+=a.count)}this.idCountMap=i,this.cardDeckNoCountMap=n,this.refreshInfo()}refreshInfo(){const e=[],i=[],n={},a={},r=[];let f=0,_=0,m=0,b=0,F=0;const P={};for(const l of this.cardList){if(this.cardDeckNoCountMap[l.cardDeckNo]&&!e.includes(l.cardDeckNo)){e.push(l.cardDeckNo);const g=this.cardDeckNoCountMap[l.cardDeckNo];l.triggerType&&(n[l.triggerType.toString().toLowerCase()]||(n[l.triggerType.toString().toLowerCase()]=0),n[l.triggerType.toString().toLowerCase()]+=g,f+=g)}if(this.idCountMap[l.id]){switch(l.cardCategory){case p.Character:_+=this.idCountMap[l.id];break;case p.Event:m+=this.idCountMap[l.id];break;case p.Field:b+=this.idCountMap[l.id]}F+=this.idCountMap[l.id],i.push(l);const g=`${l.needEnergyType.toLowerCase()+l.needEnergyCount}`;P[g]=l.needEnergyCount,a[g]||(a[g]=0),r.includes(g)||r.push(g),a[g]+=this.idCountMap[l.id]}}r.sort((l,g)=>P[l]-P[g]),this.finalCount=n[s.Final.toLowerCase()]?n[s.Final.toLowerCase()]:0,this.colorCount=n[s.Color.toLowerCase()]?n[s.Color.toLowerCase()]:0,this.specialCount=n[s.Special.toLowerCase()]?n[s.Special.toLowerCase()]:0,this.totalCount=F,this.totalTrigger=f,this.totalCharacter=_,this.totalEvent=m,this.totalField=b,this.cardAllList=i,this.triggerCountMap=n,this.energyCountMap=a,this.energyTypeKeys=r}select(e){this.selectedIndex=e,0===this.selectedIndex&&(this.filterType=void 0),1===this.selectedIndex&&(this.filterType=p.Character),2===this.selectedIndex&&(this.filterType=p.Event),3===this.selectedIndex&&(this.filterType=p.Field)}onIncrease(e){if(e.triggerType){let i=!1;switch(e.triggerType){case s.Color:i=this.colorCount>=4,i||this.colorCount++;break;case s.Final:i=this.finalCount>=4,i||this.finalCount++;break;case s.Special:i=this.specialCount>=4,i||this.specialCount++}if(i)return void this.nzMessage.warning(`\u300c${v[e.triggerType]}\u300d\u89e6\u53d1\u6700\u591a\u53ea\u80fd\u6295\u51654\u5f20`)}if(e.cardConflict){const i=e.cardConflict.split(",");for(const n of i)if(this.cardDeckNoCountMap[n])return void this.nzMessage.warning(`\u5361\u7ec4\u4e2d\u5b58\u5728\u300c${n}\u300d\uff0c\u65e0\u6cd5\u6295\u5165\u672c\u5361\u7247\u3002`)}if(this.cardDeckNoCountMap[e.cardDeckNo]){if(+this.cardDeckNoCountMap[e.cardDeckNo]>=e.limitCount)return void this.nzMessage.warning(`\u300c${e.cardName}(${e.cardDeckNo})\u300d\u6700\u591a\u53ea\u80fd\u6295\u5165${e.limitCount}\u5f20`);this.cardDeckNoCountMap[e.cardDeckNo]++,this.idCountMap[e.id]?this.idCountMap[e.id]++:this.idCountMap[e.id]=1}else this.cardDeckNoCountMap[e.cardDeckNo]=1,this.idCountMap[e.id]=1;this.refreshInfo()}onDecrease(e){if(!(+this.idCountMap[e.id]<=0)){if(e.triggerType)switch(e.triggerType){case s.Color:this.colorCount--,this.colorCount<0&&(this.colorCount=0);break;case s.Final:this.finalCount--,this.finalCount<0&&(this.finalCount=0);break;case s.Special:this.specialCount--,this.specialCount<0&&(this.specialCount=0)}this.cardDeckNoCountMap[e.cardDeckNo]--,this.idCountMap[e.id]--,this.refreshInfo()}}reset(){}save(){}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(w.K),t.Y36(T.F0),t.Y36(T.gz),t.Y36(Q.dD),t.Y36(j.U))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-user-deck-edit"]],decls:52,vars:30,consts:[[1,"table-container"],[1,"table-wrapper"],[1,"filter"],[1,"row"],[1,"column"],["nz-input","","placeholder","\u5361\u7ec4\u540d\u79f0",3,"ngModel","ngModelChange"],[3,"ngModel","nzDisabled","ngModelChange"],[3,"ngModel","ngModelChange"],["nz-button","","nzType","primary",3,"click"],["nzAllowClear","true",3,"ngModel","nzPlaceHolder","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"container"],[1,"content"],[1,"left"],[1,"deck"],[1,"card-list"],[1,"tab"],["nz-radio-button","",3,"nzValue"],["class","card",4,"ngFor","ngForOf"],[1,"statistics"],["class","column",4,"ngFor","ngForOf"],[1,"right"],[3,"nzValue","nzLabel"],[1,"card"],[3,"uaCard"],[1,"handle"],["alt","",1,"trigger",3,"src"],["alt","",1,"energy",3,"src"]],template:function(i,n){1&i&&(t.TgZ(0,"nz-layout")(1,"nz-content",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"span"),t._uU(7,"\u5361\u7ec4\u540d\u79f0\uff1a"),t.qZA(),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(r){return n.deck.name=r}),t.qZA()(),t.TgZ(9,"div",4)(10,"span"),t._uU(11,"\u662f\u5426\u516c\u5f00\uff1a"),t.qZA(),t.TgZ(12,"nz-switch",6),t.NdJ("ngModelChange",function(r){return n.deck.published=r}),t.qZA()(),t.TgZ(13,"div",4)(14,"span"),t._uU(15,"\u662f\u5426\u4e0a\u4f4d\uff1a"),t.qZA(),t.TgZ(16,"nz-switch",7),t.NdJ("ngModelChange",function(r){return n.deck.ranked=r})("ngModelChange",function(){return n.onRankChange()}),t.qZA()(),t.TgZ(17,"div",4)(18,"button",8),t.NdJ("click",function(){return n.save()}),t._uU(19,"\u4fdd\u5b58"),t.qZA()(),t.TgZ(20,"div",4)(21,"span"),t._uU(22,"\u989c\u8272\u7b5b\u9009\uff1a"),t.qZA(),t.TgZ(23,"nz-select",9),t.NdJ("ngModelChange",function(r){return n.color=r})("ngModelChange",function(){return n.onColorChange()}),t.YNc(24,Qt,1,2,"nz-option",10),t.qZA()()()(),t.TgZ(25,"div",11)(26,"div",12)(27,"div",13)(28,"div",14)(29,"div",15)(30,"div",16)(31,"nz-radio-group",7),t.NdJ("ngModelChange",function(r){return n.selectedIndex=r})("ngModelChange",function(r){return n.select(r)}),t.TgZ(32,"label",17),t._uU(33),t.qZA(),t.TgZ(34,"label",17),t._uU(35),t.qZA(),t.TgZ(36,"label",17),t._uU(37),t.qZA(),t.TgZ(38,"label",17),t._uU(39),t.qZA()()(),t.YNc(40,Et,9,2,"div",18),t.ALo(41,"cardFilter"),t.qZA()(),t.TgZ(42,"div",19)(43,"div",15)(44,"div",3),t.YNc(45,qt,4,2,"div",20),t.qZA(),t.TgZ(46,"div",3),t.YNc(47,Yt,4,2,"div",20),t.qZA()()()(),t.TgZ(48,"div",21)(49,"div",15),t.YNc(50,jt,9,2,"div",18),t.ALo(51,"cardFilter"),t.qZA()()()()()()()),2&i&&(t.xp6(8),t.Udp("width","200px"),t.Q6J("ngModel",n.deck.name),t.xp6(4),t.Q6J("ngModel",n.deck.published)("nzDisabled",n.deck.ranked),t.xp6(4),t.Q6J("ngModel",n.deck.ranked),t.xp6(7),t.Udp("width","200px"),t.Q6J("ngModel",n.color)("nzPlaceHolder","\u989c\u8272\u7b5b\u9009"),t.xp6(1),t.Q6J("ngForOf",n.EnergyTypeList),t.xp6(7),t.Q6J("ngModel",n.selectedIndex),t.xp6(1),t.Q6J("nzValue",0),t.xp6(1),t.hij("\u5168\u90e8",n.totalCount,""),t.xp6(1),t.Q6J("nzValue",1),t.xp6(1),t.hij("\u89d2\u8272",n.totalCharacter,""),t.xp6(1),t.Q6J("nzValue",2),t.xp6(1),t.hij("\u4e8b\u4ef6",n.totalEvent,""),t.xp6(1),t.Q6J("nzValue",3),t.xp6(1),t.hij("\u573a\u5730",n.totalField,""),t.xp6(1),t.Q6J("ngForOf",t.xi3(41,24,n.cardAllList,n.filterType)),t.xp6(5),t.Q6J("ngForOf",n.TriggerTypeList),t.xp6(2),t.Q6J("ngForOf",n.energyTypeKeys),t.xp6(3),t.Q6J("ngForOf",t.xi3(51,27,n.filtedCardList,n.filterType)))},dependencies:[C.sg,u.Fj,u.JJ,u.On,St.Zp,At.i,k.Of,k.Bq,k.Dg,M.hw,M.OK,y.ix,x.w,Z.dQ,O.Ip,O.Vq,E,q],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;flex-direction:row;position:relative}[_nghost-%COMP%]   nz-layout[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;position:relative;transition:2s all ease;background-color:#fff;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:2.5rem;display:flex;justify-content:start;align-items:center}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start;align-items:center}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;top:2.5rem;overflow-x:hidden;overflow-y:auto;display:flex}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;background-color:#eee}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:inline-block;padding:.25rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;width:100%;background-color:#000000b3}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:2em}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .card-list[_ngcontent-%COMP%]{background-color:#fff;padding:.5rem;overflow:auto;height:100%}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:50%;height:100%;display:inline-flex;overflow:hidden;flex-direction:column;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]{width:100%;height:calc(100% - 10rem);overflow:auto;display:block;position:relative}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{background-color:#fff;padding:.5rem;height:3rem;position:sticky;z-index:100;top:0}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]   .card-list[_ngcontent-%COMP%]{padding-top:0!important}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]{width:100%;height:10rem;overflow:auto;display:block;position:relative;border-top:1px solid #000}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:50%;height:100%}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   img.trigger[_ngcontent-%COMP%]{height:20px}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   img.energy[_ngcontent-%COMP%]{height:40px}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:50%;height:100%;display:inline-block;overflow:hidden;padding:.5rem;border-radius:1rem}"]})}return o})()},{path:"**",redirectTo:"list",pathMatch:"full"}],te=[{path:"ua-translator",component:ft},{path:"tts-tools",component:(()=>{class o{constructor(e){this.uaCardService=e,this.cardList=[],this.ipList=[],this.packNo=void 0,this.packNoList=[],this.EnergyTypeList=N,this.currentIpId=void 0,this.currentType=void 0,this.gen1="",this.gen2="",this.gen3=""}ngOnInit(){this.uaCardService.getIpList().subscribe(e=>{this.ipList=e})}onIpChange(){this.uaCardService.getCardListByIpId(this.currentIpId).subscribe(e=>{this.packNo=void 0,this.cardList=e;const i=[];for(const n of this.cardList)i.includes(n.packNo)||i.push(n.packNo);this.packNoList=i})}genGen1(){const e=[];for(const i of this.cardList)if(i.packNo===this.packNo&&i.needEnergyType===this.currentType&&!i.rare.includes("\u2605")){const n={};n.Nickname=i.cardDeckNo,n.Description="";for(const a of i.effectsZh??[])n.Description+=a.newLine?"\r\n":a.effectImg?`\u3010${a.effect}\u3011`:a.effect;e.push(n)}this.gen1=JSON.stringify(e.reverse())}genGen3(){try{const e=JSON.parse(this.gen2),i=JSON.parse(this.gen1);if(!e.ObjectStates)return void alert("\u8f93\u5165\u7684TTS JSON\u683c\u5f0f\u4e0d\u6b63\u786e: \u6ca1\u627e\u5230\u2018ObjectStates\u2019");if(!e.ObjectStates[0].ContainedObjects)return void alert("\u8f93\u5165\u7684TTS JSON\u683c\u5f0f\u4e0d\u6b63\u786e\uff1a\u2018ObjectStates\u2019\u4e0b\u6ca1\u627e\u5230\u2018ContainedObjects\u2019");if(e.ObjectStates[0].ContainedObjects.length!==i.length)return void alert("TTS JSON\u548c\u51c6\u5907\u5408\u5e76\u7684JSON\u957f\u5ea6\u4e0d\u4e00\u81f4");for(let n=0;n<i.length;n++)e.ObjectStates[0].ContainedObjects[n].Nickname=i[n].Nickname,e.ObjectStates[0].ContainedObjects[n].Description=i[n].Description;this.gen3=JSON.stringify(e)}catch{alert("\u8f93\u5165\u7684TTS JSON\u683c\u5f0f\u4e0d\u6b63\u786e")}}copy(){var e=this;return function Ht(o){return function(){var c=this,e=arguments;return new Promise(function(i,n){var a=o.apply(c,e);function r(_){H(a,i,n,r,f,"next",_)}function f(_){H(a,i,n,r,f,"throw",_)}r(void 0)})}}(function*(){yield navigator.clipboard.writeText(e.gen3),alert("\u5927\u6982\u590d\u5236\u6210\u529f\u4e86\u5427")})()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(w.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-tts-tools"]],decls:22,vars:25,consts:[[1,"table-container"],[1,"table-wrapper"],[1,"filter"],[3,"ngModel","nzPlaceHolder","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzAllowClear","true",3,"ngModel","nzPlaceHolder","ngModelChange"],[3,"click",4,"ngIf"],[1,"container"],[1,"tts",3,"disabled","ngModel","ngModelChange"],[1,"tts",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel"],[3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"nz-layout")(1,"nz-content",0)(2,"div",1)(3,"div",2)(4,"nz-select",3),t.NdJ("ngModelChange",function(r){return n.currentIpId=r})("ngModelChange",function(){return n.onIpChange()}),t.YNc(5,Rt,1,2,"nz-option",4),t.qZA(),t.TgZ(6,"nz-select",5),t.NdJ("ngModelChange",function(r){return n.currentType=r}),t.YNc(7,Bt,1,2,"nz-option",4),t.qZA(),t.TgZ(8,"nz-select",5),t.NdJ("ngModelChange",function(r){return n.packNo=r}),t.YNc(9,Kt,1,2,"nz-option",4),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA(),t.YNc(12,Gt,2,0,"button",6),t.YNc(13,Vt,2,0,"button",6),t.YNc(14,Xt,2,0,"button",6),t.qZA(),t.TgZ(15,"div",7)(16,"textarea",8),t.NdJ("ngModelChange",function(r){return n.gen1=r}),t._uU(17," "),t.qZA(),t.TgZ(18,"textarea",9),t.NdJ("ngModelChange",function(r){return n.gen2=r}),t._uU(19," "),t.qZA(),t.TgZ(20,"textarea",8),t.NdJ("ngModelChange",function(r){return n.gen3=r}),t._uU(21," "),t.qZA()()()()()),2&i&&(t.xp6(4),t.Udp("width","300px"),t.Q6J("ngModel",n.currentIpId)("nzPlaceHolder","\u8bf7\u9009\u62e9IP"),t.xp6(1),t.Q6J("ngForOf",n.ipList),t.xp6(1),t.Udp("width","100px"),t.Q6J("ngModel",n.currentType)("nzPlaceHolder","\u989c\u8272"),t.xp6(1),t.Q6J("ngForOf",n.EnergyTypeList),t.xp6(1),t.Udp("width","100px"),t.Q6J("ngModel",n.packNo)("nzPlaceHolder","\u5361\u5305"),t.xp6(1),t.Q6J("ngForOf",n.packNoList),t.xp6(2),t.AsE("\u9009\u62e9\u7684\u662f\uff1a",n.packNo,"-",n.currentType,""),t.xp6(1),t.Q6J("ngIf",!!n.packNo&&!!n.currentType),t.xp6(1),t.Q6J("ngIf",!!n.gen1&&!!n.gen2),t.xp6(1),t.Q6J("ngIf",!!n.gen3),t.xp6(2),t.Q6J("disabled",!0)("ngModel",n.gen1),t.xp6(2),t.Q6J("ngModel",n.gen2),t.xp6(2),t.Q6J("disabled",!0)("ngModel",n.gen3))},dependencies:[C.sg,C.O5,u.Fj,u.JJ,u.On,M.hw,M.OK,O.Ip,O.Vq],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;flex-direction:row;position:relative}[_nghost-%COMP%]   nz-layout[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;position:relative;transition:2s all ease;background-color:#fff;padding:.5rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:2.5rem;display:flex;justify-content:start;align-items:center}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;top:2.5rem;overflow-x:hidden;overflow-y:auto;display:flex;flex-direction:row}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]{width:250px;display:inline-block;padding:.25rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]     .ant-card-body{padding:.25rem}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]     .ant-card-meta-title{margin:0}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .deck[_ngcontent-%COMP%]     .ant-card-meta-detail{font-size:12px}.table-container[_ngcontent-%COMP%]   div.table-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tts[_ngcontent-%COMP%]{display:inline-block;width:30%;height:100%}"]})}return o})()},{path:"dccg-translator",component:at},{path:"user-deck",children:R},{path:"all-deck",children:R},{path:"",redirectTo:"ua-translator",pathMatch:"full"}];let ee=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[T.Bz.forChild(te),T.Bz]})}return o})(),ne=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[C.ez,B.m,ee]})}return o})()}}]);